name: Test and Publish
on:
  push:


jobs:

  test:
    name: testing
    uses: yankeeinlondon/gha/.github/workflows/test.yml@main

  publish:
    name: publish
    needs: test  # This ensures tests pass before publishing
    uses: yankeeinlondon/gha/.github/workflows/publish.yml@main
    with:
        jsr_scope: '@yankeeinlondon'
        github_packages_scope: '@yankeeinlondon'
    secrets:
        NPM_TOKEN: ${{ secrets.NPM_TOKEN }}

